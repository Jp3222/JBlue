/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package com.jblue.vista.ventanas;

import com.jblue.sistema.Sesion;
import com.jblue.util.tiempo.Fecha;
import com.jblue.vista.conf.SuperVentana;
import com.jblue.vista.ventanas.bd.NewMenuCalles;
import com.jblue.vista.ventanas.bd.NewMenuTomas;
import com.jblue.vista.ventanas.bd.NewMenuUsuarios;
import com.jblue.vista.ventanas.bd.TomasRegistradas;
import com.jblue.vista.ventanas.vmp.VHistorialPagos;
import com.jblue.vista.ventanas.vmp.VPrincipal;
import com.jblue.vista.ventanas.vmp.VRecargos;
import com.jblue.vista.ventanas.vp.MenuPresidente;
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

/**
 *
 * @author jp
 */
public class MenuPrincipal extends SuperVentana {

    private final Login login;
    private final MenuTesoreria menuTesoreria;
    private final MenuPresidente menuPresidente;
    //
    private final NewMenuUsuarios menuUsuarios;
    private final NewMenuCalles menuCalles;
    private final NewMenuTomas menuTipoTomas;
    private final TomasRegistradas menuTomasRegistradas;
    private final JPanel[] menus;

    //
    private final Fecha fecha;

    //
    public MenuPrincipal(Login login) {
        this.menus = new JPanel[3];
        this._TITULO = 2;
        this.login = login;
        this.menuTesoreria = new MenuTesoreria();
        this.menuPresidente = new MenuPresidente();
        this.menuUsuarios = new NewMenuUsuarios();
        this.menuCalles = new NewMenuCalles();
        this.menuTipoTomas = new NewMenuTomas();
        menuTomasRegistradas = new TomasRegistradas();
        fecha = new Fecha();
        //
        this.initComponents();
        llamable();
    }

    @Override
    protected final void llamable() {
        addComponentes();
        estadoFinal();
        estadoInicial();
        addEventos();
    }

    @Override
    public void estadoInicial() {

    }

    @Override
    protected void estadoFinal() {
        super.estadoFinal();
    }

    @Override
    protected void addEventos() {
        super.addEventos(); // Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/OverriddenMethodBody
    }

    @Override
    protected void addComponentes() {

        menus[0] = new VPrincipal();
        menus[1] = new VRecargos();
        menus[2] = new VHistorialPagos();

        for (int i = 0; i < menus.length; i++) {
            JPanel menu = (JPanel) jTabbedPane1.getComponentAt(i + 1);
            menu.add(menus[i], BorderLayout.CENTER);
        }

        jTabbedPane1.remove(0);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jpAreaPersonal = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jbtCobros = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jbtRecargos = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jbtHistorialPagos = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jPanel8 = new javax.swing.JPanel();
        jPanel11 = new javax.swing.JPanel();
        jPanel10 = new javax.swing.JPanel();
        jPanel9 = new javax.swing.JPanel();
        jbtSalir = new javax.swing.JButton();
        jPanel12 = new javax.swing.JPanel();
        jPanel13 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList<>();
        jTextField1 = new javax.swing.JTextField();
        jpVisor = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jpCobros = new javax.swing.JPanel();
        jpRecargos = new javax.swing.JPanel();
        jpHistorialPagos = new javax.swing.JPanel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        itemMenuTesorero = new javax.swing.JMenuItem();
        itemMenuPresidente = new javax.swing.JMenuItem();
        jMenu3 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        ItemBDUsuario = new javax.swing.JMenuItem();
        itemBDCalles = new javax.swing.JMenuItem();
        itemBDTomas = new javax.swing.JMenuItem();
        jSeparator2 = new javax.swing.JPopupMenu.Separator();
        jMenuItem4 = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setExtendedState(6);

        jTabbedPane1.setTabLayoutPolicy(javax.swing.JTabbedPane.SCROLL_TAB_LAYOUT);
        jTabbedPane1.setPreferredSize(new java.awt.Dimension(1200, 675));

        jpAreaPersonal.setLayout(new java.awt.BorderLayout());

        jPanel1.setPreferredSize(new java.awt.Dimension(300, 100));
        jPanel1.setLayout(new java.awt.BorderLayout());

        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Areas de Trabajo");
        jLabel1.setPreferredSize(new java.awt.Dimension(300, 50));
        jPanel1.add(jLabel1, java.awt.BorderLayout.PAGE_START);

        jPanel2.setLayout(new javax.swing.BoxLayout(jPanel2, javax.swing.BoxLayout.PAGE_AXIS));

        jPanel4.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel4.setLayout(new java.awt.BorderLayout());

        jbtCobros.setText("Cobros");
        jbtCobros.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtCobrosActionPerformed(evt);
            }
        });
        jPanel4.add(jbtCobros, java.awt.BorderLayout.CENTER);

        jPanel2.add(jPanel4);

        jPanel3.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel3.setLayout(new java.awt.BorderLayout());

        jbtRecargos.setText("Recargos");
        jbtRecargos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtRecargosActionPerformed(evt);
            }
        });
        jPanel3.add(jbtRecargos, java.awt.BorderLayout.CENTER);

        jPanel2.add(jPanel3);

        jPanel5.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel5.setLayout(new java.awt.BorderLayout());

        jbtHistorialPagos.setText("Historial De Pagos");
        jbtHistorialPagos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtHistorialPagosActionPerformed(evt);
            }
        });
        jPanel5.add(jbtHistorialPagos, java.awt.BorderLayout.CENTER);

        jPanel2.add(jPanel5);

        jPanel6.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel6.setLayout(new java.awt.BorderLayout());
        jPanel2.add(jPanel6);

        jPanel7.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel7.setLayout(new java.awt.BorderLayout());
        jPanel2.add(jPanel7);

        jPanel8.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel8.setLayout(new java.awt.BorderLayout());
        jPanel2.add(jPanel8);

        jPanel11.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel11.setLayout(new java.awt.BorderLayout());
        jPanel2.add(jPanel11);

        jPanel10.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel10.setLayout(new java.awt.BorderLayout());
        jPanel2.add(jPanel10);

        jPanel9.setPreferredSize(new java.awt.Dimension(300, 593));
        jPanel9.setLayout(new java.awt.BorderLayout());

        jbtSalir.setText("Salir");
        jbtSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtSalirActionPerformed(evt);
            }
        });
        jPanel9.add(jbtSalir, java.awt.BorderLayout.CENTER);

        jPanel2.add(jPanel9);

        jPanel1.add(jPanel2, java.awt.BorderLayout.CENTER);

        jpAreaPersonal.add(jPanel1, java.awt.BorderLayout.LINE_START);

        jPanel12.setLayout(new java.awt.BorderLayout());

        jPanel13.setPreferredSize(new java.awt.Dimension(300, 643));
        jPanel13.setLayout(new java.awt.BorderLayout());

        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel2.setText("Tareas");
        jLabel2.setPreferredSize(new java.awt.Dimension(300, 50));
        jPanel13.add(jLabel2, java.awt.BorderLayout.NORTH);

        jScrollPane1.setPreferredSize(new java.awt.Dimension(300, 550));

        jList1.setModel(new javax.swing.AbstractListModel<String>() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public String getElementAt(int i) { return strings[i]; }
        });
        jScrollPane1.setViewportView(jList1);

        jPanel13.add(jScrollPane1, java.awt.BorderLayout.SOUTH);

        jTextField1.setText("jTextField1");
        jTextField1.setMaximumSize(new java.awt.Dimension(300, 30));
        jTextField1.setPreferredSize(new java.awt.Dimension(300, 30));
        jPanel13.add(jTextField1, java.awt.BorderLayout.CENTER);

        jPanel12.add(jPanel13, java.awt.BorderLayout.LINE_END);

        jpVisor.setLayout(new java.awt.BorderLayout());

        jLabel3.setFont(new java.awt.Font("Liberation Sans", 0, 24)); // NOI18N
        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel3.setText("Sistema de cobranza del servicio de agua potable");
        jLabel3.setPreferredSize(new java.awt.Dimension(323, 50));
        jpVisor.add(jLabel3, java.awt.BorderLayout.PAGE_START);

        jPanel12.add(jpVisor, java.awt.BorderLayout.CENTER);

        jpAreaPersonal.add(jPanel12, java.awt.BorderLayout.CENTER);

        jTabbedPane1.addTab("Area Personal", jpAreaPersonal);

        jpCobros.setPreferredSize(new java.awt.Dimension(1200, 643));
        jpCobros.setLayout(new java.awt.BorderLayout());
        jTabbedPane1.addTab("Cobros", jpCobros);

        jpRecargos.setLayout(new java.awt.BorderLayout());
        jTabbedPane1.addTab("Recargos", jpRecargos);

        jpHistorialPagos.setLayout(new java.awt.BorderLayout());
        jTabbedPane1.addTab("Historial de pagos", jpHistorialPagos);

        getContentPane().add(jTabbedPane1, java.awt.BorderLayout.CENTER);
        jTabbedPane1.getAccessibleContext().setAccessibleName("tab_root");

        jMenuBar1.setPreferredSize(new java.awt.Dimension(1200, 25));

        jMenu1.setText("Menu");

        itemMenuTesorero.setText("Tesorero");
        jMenu1.add(itemMenuTesorero);

        itemMenuPresidente.setText("Presidente");
        itemMenuPresidente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemMenuPresidenteActionPerformed(evt);
            }
        });
        jMenu1.add(itemMenuPresidente);

        jMenu3.setText("Base de datos");

        jMenuItem1.setText("Tomas Registradas");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu3.add(jMenuItem1);

        ItemBDUsuario.setText("BD Usuarios");
        ItemBDUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ItemBDUsuarioActionPerformed(evt);
            }
        });
        jMenu3.add(ItemBDUsuario);

        itemBDCalles.setText("BD Calles");
        itemBDCalles.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemBDCallesActionPerformed(evt);
            }
        });
        jMenu3.add(itemBDCalles);

        itemBDTomas.setText("BD Tipo de tomas");
        itemBDTomas.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemBDTomasActionPerformed(evt);
            }
        });
        jMenu3.add(itemBDTomas);

        jMenu1.add(jMenu3);
        jMenu1.add(jSeparator2);

        jMenuItem4.setText("Salir");
        jMenuItem4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem4ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem4);

        jMenuBar1.add(jMenu1);

        setJMenuBar(jMenuBar1);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void ItemBDUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ItemBDUsuarioActionPerformed
        SwingUtilities.invokeLater(() -> {
            menuUsuarios.setVisible(true);
        });
    }//GEN-LAST:event_ItemBDUsuarioActionPerformed

    private void itemBDCallesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemBDCallesActionPerformed
        SwingUtilities.invokeLater(() -> {
            menuCalles.setVisible(true);
        });
    }//GEN-LAST:event_itemBDCallesActionPerformed

    private void itemBDTomasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemBDTomasActionPerformed
        SwingUtilities.invokeLater(() -> {
            menuTipoTomas.setVisible(true);
        });
    }//GEN-LAST:event_itemBDTomasActionPerformed

    private void jMenuItem4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem4ActionPerformed
        this.dispose();
    }//GEN-LAST:event_jMenuItem4ActionPerformed

    private void jbtCobrosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtCobrosActionPerformed
        vistaSeleccionada(1);
    }//GEN-LAST:event_jbtCobrosActionPerformed

    private void jbtRecargosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtRecargosActionPerformed
        vistaSeleccionada(2);
    }//GEN-LAST:event_jbtRecargosActionPerformed

    private void jbtHistorialPagosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtHistorialPagosActionPerformed
        vistaSeleccionada(3);
    }//GEN-LAST:event_jbtHistorialPagosActionPerformed

    private void jbtSalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtSalirActionPerformed
        vistaSeleccionada(0);
        dispose();
    }//GEN-LAST:event_jbtSalirActionPerformed

    private void itemMenuPresidenteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemMenuPresidenteActionPerformed
        SwingUtilities.invokeLater(() -> {
            menuPresidente.setVisible(true);
        });

    }//GEN-LAST:event_itemMenuPresidenteActionPerformed

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        SwingUtilities.invokeLater(() -> {
            menuTomasRegistradas.setVisible(true);
        });

    }//GEN-LAST:event_jMenuItem1ActionPerformed

    public void vistaSeleccionada(int i) {
        SwingUtilities.invokeLater(() -> jTabbedPane1.setSelectedIndex(i));
    }

    @Override
    public void dispose() {
        super.dispose();
        irLogin();
    }

    private void irLogin() {
        cerrarMenusActivos();
        Sesion instancia = Sesion.getInstancia();
        boolean finSesion = instancia.finSesion();
        if (!finSesion) {
            JOptionPane.showMessageDialog(this, "ERROR AL REGISTRAR FIN DE SESION");
        }
        SwingUtilities.invokeLater(() -> {
            login.setVisible(true);
        });
    }

    private void cerrarMenusActivos() {
        JFrame[] arr = {
            menuTesoreria, menuPresidente, menuCalles, menuTipoTomas, menuUsuarios
        };
        for (JFrame o : arr) {
            if (!o.isVisible() && !o.isActive()) {
                continue;
            }
            SwingUtilities.invokeLater(() -> {
                o.setVisible(false);
                o.dispose();
            });
        }
    }

    // <editor-fold defaultstate="collapsed" desc="Variables De Interfaz">
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem ItemBDUsuario;
    private javax.swing.JMenuItem itemBDCalles;
    private javax.swing.JMenuItem itemBDTomas;
    private javax.swing.JMenuItem itemMenuPresidente;
    private javax.swing.JMenuItem itemMenuTesorero;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JList<String> jList1;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel10;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JPanel jPanel12;
    private javax.swing.JPanel jPanel13;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JPopupMenu.Separator jSeparator2;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JButton jbtCobros;
    private javax.swing.JButton jbtHistorialPagos;
    private javax.swing.JButton jbtRecargos;
    private javax.swing.JButton jbtSalir;
    private javax.swing.JPanel jpAreaPersonal;
    private javax.swing.JPanel jpCobros;
    private javax.swing.JPanel jpHistorialPagos;
    private javax.swing.JPanel jpRecargos;
    private javax.swing.JPanel jpVisor;
    // End of variables declaration//GEN-END:variables
// </editor-fold>

}
